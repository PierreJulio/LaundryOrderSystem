<div class="register-container">
    <p-toast></p-toast>
    
    <!-- Éléments décoratifs en arrière-plan -->
    <div class="background-decoration"></div>
    
    <div class="register-card">
        <div class="logo-container">
            <img src="assets/logo.svg" alt="Logo Blanchisserie" class="logo" />
        </div>
        
        <div class="text-center mb-5">
            <h1 class="welcome-title">Créer un compte</h1>
            <p class="welcome-subtitle">Rejoignez notre service de blanchisserie professionnel</p>
        </div>
        
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">            <div class="formgrid grid">
                <div class="field col-12">
                    <label for="email" class="form-label">Email</label>
                    <div class="p-input-wrapper">
                        <input id="email" type="email" pInputText formControlName="email" class="w-full" />
                    </div>
                    <small class="p-error" *ngIf="registerForm.get('email')?.errors?.['required'] && registerForm.get('email')?.touched">
                        Email requis
                    </small>
                    <small class="p-error" *ngIf="registerForm.get('email')?.errors?.['email'] && registerForm.get('email')?.touched">
                        Format d'email invalide
                    </small>
                </div>
                
                <div class="field col-6">
                    <label for="firstName" class="form-label">Prénom</label>
                    <div class="p-input-wrapper">
                        <input id="firstName" type="text" pInputText formControlName="firstName" class="w-full" />
                    </div>
                    <small class="p-error" *ngIf="registerForm.get('firstName')?.invalid && registerForm.get('firstName')?.touched">
                        Prénom requis
                    </small>
                </div>
                
                <div class="field col-6">
                    <label for="lastName" class="form-label">Nom</label>
                    <div class="p-input-wrapper">
                        <input id="lastName" type="text" pInputText formControlName="lastName" class="w-full" />
                    </div>
                    <small class="p-error" *ngIf="registerForm.get('lastName')?.invalid && registerForm.get('lastName')?.touched">
                        Nom requis
                    </small>
                </div>
                
                <div class="field col-12">
                    <label for="phoneNumber" class="form-label">Numéro de téléphone (facultatif)</label>
                    <div class="p-input-wrapper">
                        <input id="phoneNumber" type="tel" pInputText formControlName="phoneNumber" class="w-full" />
                    </div>
                </div>
                
                <div class="field col-12">
                    <label for="password" class="form-label">Mot de passe</label>
                    <div class="p-input-wrapper">
                        <p-password id="password" formControlName="password" [toggleMask]="true" [feedback]="true" styleClass="w-full"></p-password>
                    </div>
                    <small class="p-error" *ngIf="registerForm.get('password')?.errors?.['required'] && registerForm.get('password')?.touched">
                        Mot de passe requis
                    </small>
                    <small class="p-error" *ngIf="registerForm.get('password')?.errors?.['minlength'] && registerForm.get('password')?.touched">
                        Le mot de passe doit contenir au moins 6 caractères
                    </small>
                </div>
                
                <div class="field col-12">
                    <label for="confirmPassword" class="form-label">Confirmer le mot de passe</label>
                    <div class="p-input-wrapper">
                        <p-password id="confirmPassword" formControlName="confirmPassword" [toggleMask]="true" [feedback]="false" styleClass="w-full"></p-password>
                    </div>
                    <small class="p-error" *ngIf="registerForm.get('confirmPassword')?.errors?.['required'] && registerForm.get('confirmPassword')?.touched">
                        Confirmation du mot de passe requise
                    </small>
                    <small class="p-error" *ngIf="registerForm.errors?.['mismatch'] && registerForm.get('confirmPassword')?.touched">
                        Les mots de passe ne correspondent pas
                    </small>
                </div>
                  <div class="field col-12 mt-4">
                    <div class="flex align-items-center cursor-pointer" (click)="toggleAcceptTerms()">
                        <p-checkbox id="acceptTerms" formControlName="acceptTerms" [binary]="true" styleClass="mr-2"></p-checkbox>
                        <span class="terms-label">J'accepte les conditions générales d'utilisation</span>
                    </div>
                    <small class="p-error" *ngIf="registerForm.get('acceptTerms')?.invalid && registerForm.get('acceptTerms')?.touched">
                        Vous devez accepter les conditions d'utilisation
                    </small>
                </div>
            </div>
            
            <button pButton label="S'inscrire" icon="pi pi-user-plus" class="w-full register-button p-button-rounded mt-4" [loading]="loading" [disabled]="registerForm.invalid"></button>
        
            <p-divider align="center" type="solid">
                <span class="divider-text">ou</span>
            </p-divider>
            
            <div class="text-center mt-3">
                <a routerLink="/login" class="login-link">Déjà un compte ? Connectez-vous</a>
            </div>
        </form>
        
        <div class="footer-text">
            <p>Service de Blanchisserie Professionnelle © 2025</p>
        </div>
    </div>
</div>
